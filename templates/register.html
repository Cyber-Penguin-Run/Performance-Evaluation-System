<script>
    function addStates()
    {
        var country = document.getElementById("country").value;

        var states = {{ states|tojson }}

        statesString = "<option value = \"\">State</option>"

        if (country in states) {

            for (let i = 0; i < states[country].length; i++) {
            statesString += "<option value = "+states[country][i][1]+">"+states[country][i][0]+"</option>\n"
            }

        }



        document.getElementById("state").innerHTML = statesString

    }
</script>
<script type="text/javascript">

function CheckSpace(event)
{
   if(event.which ==32)
   {
      event.preventDefault();
      return false;
   }
}
</script>

{% extends "base.html" %}
{% block content %}
<div class="login-bg d-flex align-items-center">

    <div class="login-bg-darken w-100 h-100 d-flex align-items-center" style="margin:auto">

        <div class="container align-center mx-3r">
    
            <form style="max-width: 400px; margin: auto;" method="POST"> 
                <img style="width: 80%" class="mx-auto d-block"  src="{{ url_for('static', filename='img/logo.png') }}" alt="logo">
                <h1 class="text-center h3 mb-3 font-weight-normal">Please sign in</h1>
        
                <label for="username" class="sr-only my-1"><strong>Username</strong></label>
                <input type="text" id="username" name="username" minlength="5" maxlength="24" placeholder="Username" onkeypress="CheckSpace(event)" class="form-control" required autofocus>

                <label for="password" class="sr-only my-1" ><strong>Password</strong></label>
                <input type="password" id="password" name="password" minlength="8" maxlength="24" placeholder="Password" class="form-control">



                <div class="d-flex mt-3">
                    <input type="text" name="firstname" minlength="1" maxlength="24" placeholder="First Name" onkeypress="CheckSpace(event)" class="form-control">
                    <input type="text" name="lastname" minlength="1"  maxlength="24" placeholder="Last Name" onkeypress="CheckSpace(event)" class="form-control">
                </div>


                <input type="text" name="address" placeholder="Address" class="form-control mt-3">
                <div class = "d-flex">

                    <select class="form-control" name="country" id="country" onchange="addStates()">
                        <option value="">Country</option>
                        {% for item, value in states.items() %}
                            <option value = "{{item}}" >{{item}}</option>
                        {% endfor %}
                    </select>
    
                    <select class="form-control" name="state" id="state">
                        <option value="">State</option>
                    </select>

                </div>

        
                <div class="mt-3 text-center">
                    <button class="enrichery-primary btn btn-lg btn-primary btn-block">Register</button>
                </div>
        
            </form>
        </div>
    
    </div>

</div>

{% endblock content %}